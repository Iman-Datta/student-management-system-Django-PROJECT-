<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ title }}</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
      rel="stylesheet" />
  </head>
  <body>
    <div class="container mt-5 mb-5">
      <h1 class="text-center mb-4">{{ title }}</h1>
      <p class="lead text-center">{{ message }}</p>

      <form
        method="post"
        class="border rounded p-4 shadow"
        enctype="multipart/form-data">
        {% csrf_token %}

        <!-- Row 1 -->
        <div class="row mb-3">
          <div class="col-md-6">
            <label for="first_name" class="form-label">First Name *</label>
            <input
              type="text"
              class="form-control"
              id="first_name"
              name="first_name"
              required />
          </div>
          <div class="col-md-6">
            <label for="last_name" class="form-label">Last Name *</label>
            <input
              type="text"
              class="form-control"
              id="last_name"
              name="last_name"
              required />
          </div>
        </div>

        <!-- Row 2 -->
        <div class="row mb-3">
          <div class="col-md-6">
            <label for="email" class="form-label">Email *</label>
            <input
              type="email"
              class="form-control"
              id="email"
              name="email"
              required />
          </div>
          <div class="col-md-6">
            <label for="password" class="form-label">Password *</label>
            <input
              type="password"
              class="form-control"
              id="password"
              name="password"
              required />
          </div>
        </div>

        <!-- Row 3 -->
        <div class="row mb-3">
          <div class="col-md-6">
            <label for="role" class="form-label">Select Role *</label>
            <select
              class="form-select"
              name="role"
              id="role"
              required
              onchange="toggleRoleFields()">
              <option value="" selected disabled>Choose...</option>
              <option value="student">Student</option>
              <option value="teacher">Teacher</option>
            </select>
          </div>
        </div>

        <!-- student field -->
        <div class="row mb-3" id="studentFields" style="display: none">
          <h3 class="mb-3 mt-3">Student Details</h3>

          <!-- Date of Birth -->
          <div class="row mb-3">
            <div class="col-md-6">
              <label for="dob" class="form-label">Date of Birth *</label>
              <input
                type="date"
                class="form-control"
                id="dob"
                name="dob"
                data-student />
            </div>

            <!-- Mobile Number -->
            <div class="col-md-6">
              <label for="mobile" class="form-label">Mobile Number *</label>
              <input
                type="tel"
                class="form-control"
                id="mobile"
                name="mobile"
                data-student />
            </div>
          </div>

          <!-- Father & Mother Name -->
          <div class="row mb-3">
            <div class="col-md-6">
              <label for="father_name" class="form-label"
                >Father's Name *</label
              >
              <input
                type="text"
                class="form-control"
                id="father_name"
                name="father_name"
                data-student />
            </div>

            <div class="col-md-6">
              <label for="mother_name" class="form-label"
                >Mother's Name *</label
              >
              <input
                type="text"
                class="form-control"
                id="mother_name"
                name="mother_name"
                data-student />
            </div>
          </div>

          <!-- Guardian Contact -->
          <div class="col-md-6">
            <label for="guardian_contact" class="form-label"
              >Guardian's Contact *</label
            >
            <input
              type="tel"
              class="form-control"
              id="guardian_contact"
              name="guardian_contact"
              data-student />
          </div>

          <!-- Permanent Address Group -->
          <fieldset class="border rounded p-3 mb-3">
            <legend class="float-none w-auto px-2">Permanent Address</legend>

            <div class="row">
              <div class="col-md-6">
                <label for="permanent_address" class="form-label"
                  >Address</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="permanent_address"
                  name="permanent_address" />
              </div>

              <div class="col-md-6">
                <label for="permanent_city" class="form-label">City</label>
                <input
                  type="text"
                  class="form-control"
                  id="permanent_city"
                  name="permanent_city" />
              </div>

              <div class="col-md-6">
                <label for="permanent_state" class="form-label">State</label>
                <input
                  type="text"
                  class="form-control"
                  id="permanent_state"
                  name="permanent_state" />
              </div>

              <div class="col-md-6">
                <label for="permanent_zip" class="form-label">Zip</label>
                <input
                  type="text"
                  class="form-control"
                  id="permanent_zip"
                  name="permanent_zip"
                  data-student />
              </div>
            </div>
          </fieldset>

          <!-- Current Address Group -->
          <fieldset class="border rounded p-3">
            <legend class="float-none w-auto px-2">Current Address</legend>

            <div class="row">
              <div class="col-md-6">
                <label for="current_address" class="form-label">Address</label>
                <input
                  type="text"
                  class="form-control"
                  id="current_address"
                  name="current_address" />
              </div>

              <div class="col-md-6">
                <label for="current_city" class="form-label">City</label>
                <input
                  type="text"
                  class="form-control"
                  id="current_city"
                  name="current_city" />
              </div>

              <div class="col-md-6">
                <label for="current_state" class="form-label">State</label>
                <input
                  type="text"
                  class="form-control"
                  id="current_state"
                  name="current_state" />
              </div>

              <div class="col-md-6">
                <label for="current_zip" class="form-label">Zip</label>
                <input
                  type="text"
                  class="form-control"
                  id="current_zip"
                  name="current_zip"
                  data-student />
              </div>
            </div>
          </fieldset>
        </div>

        <!-- Teacher field -->
        <div class="row mb-3" id="teacherFields" style="display: none">
          <!-- Teacher Fields -->
          <div class="row mb-3">
            <div class="col-md-6">
              <label for="department" class="form-label">Department *</label>
              <input
                type="text"
                class="form-control"
                id="department"
                name="department"
                data-teacher />
            </div>

            <div class="col-md-6">
              <label for="subject_specialization" class="form-label"
                >Subject Specialization *</label
              >
              <input
                type="text"
                class="form-control"
                id="subject_specialization"
                name="subject_specialization"
                data-teacher />
            </div>
          </div>

          <div class="row mb-3">
            <div class="col-md-6">
              <label for="mob" class="form-label">Mobile Number *</label>
              <input
                type="text"
                class="form-control"
                id="mob"
                name="mob"
                data-teacher />
            </div>

            <div class="col-md-6">
              <label for="gender" class="form-label">Gender *</label>
              <select
                class="form-select"
                name="gender"
                id="gender"
                data-teacher>
                <option value="" disabled selected>Choose...</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
              </select>
            </div>
          </div>
        </div>
        <button type="submit" class="btn btn-primary">Register</button>
      </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      function toggleRoleFields() {
        const role = document.getElementById("role").value;
        const studentFields = document.getElementById("studentFields");
        const teacherFields = document.getElementById("teacherFields");

        // Hide both sections initially
        studentFields.style.display = "none";
        teacherFields.style.display = "none";

        // Disable all role-specific required fields
        document
          .querySelectorAll("[data-student], [data-teacher]")
          .forEach((el) => {
            el.required = false;
          });

        // Show and re-enable only the selected role's fields
        if (role === "student") {
          studentFields.style.display = "block";
          studentFields.querySelectorAll("[data-student]").forEach((el) => {
            el.required = true;
          });
        } else if (role === "teacher") {
          teacherFields.style.display = "block";
          teacherFields.querySelectorAll("[data-teacher]").forEach((el) => {
            el.required = true;
          });
        }
      }
    </script>
  </body>
</html>
